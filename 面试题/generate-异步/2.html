<script>
    //sleep() 休眠
    // function sleep(time){
    //     let pre =Date.now()
    //     while(Date.now()-pre <time){
    //     }
    // }
    function sleep2(time){
        return new Promise((resolve,reject)=>{
            setTimeout(()=>{
                resolve(2222)
            },time)
        })
    }
    // console.log(1)
    // sleep(3000)
    // console.log(2);
    (async()=>{
            await sleep2(3000)
            console.log(3)
        })()
    function * foo(){
        const a = yield sleep2(2000)
        console.log(a)
        const b = yield sleep2(2000)
        console.log(b)
    }
    // next(值) 值当做 yield 返回值
    //如果a 要为 promise里resolve的值
    //要把promise的
    function autoRun(obj,pre){
        //当前这一块
        let { done ,value} =obj.next(pre)
        if(done) return 
        //下一块
        value.then((res)=>{
            autoRun(obj,res)
        })
        // autoRun(obj)
    }
    let iterator = foo()
    autoRun(iterator)

    //callback -> promise   generator async+await
</script>